"use strict";var reg=/id=(\d+)/,res=reg.test(location.search);res||(location.href="../html/goods_list.html");var id=reg.exec(location.search)[1];console.log(id);var login=$.cookie("login"),container=document.querySelector(".container");function readData(n){var s="",a="";s+='\n    \x3c!-- 图片部分 --\x3e\n                <div class="content_text_pic">\n                    <div class="content_text_picMain">\n                        <img src="'+n.goods_img+'" alt="" class="bigImg">\n                    </div>\n                    <div class="content_text_picMore">\n                        <p>\n                            <i>\n                                <img src="'+n.goods_img+'" alt="" class="selectImg">\n                            </i>\n                            <i>\n                                    <img src="'+n.goods_img1+'" alt="" class="selectImg">\n                                </i>\n                            <i>\n                                        <img src="'+n.goods_img2+'" alt="" class="selectImg">\n                             </i>\n                            <i>\n                                    <img src="'+n.goods_img3+'" alt="" class="selectImg">\n                         </i>\n                        </p>\n                    </div>\n                </div>\n                \x3c!-- 产品介绍 --\x3e\n                <div class="content_text_con">\n                    <h3>\n                    '+n.goods_name+'\n\n                    </h3>\n                    \x3c!--价格打折 --\x3e\n                    <div class="content_text_con_price">\n                        <div class="content_text1">\n                            <i>价格：</i> <span>￥'+n.goods_money+'</span>\n                        </div>\n                        \x3c!-- 价格第二排 --\x3e\n                        <div class="content_text2 clearFix">\n                            <p class="content_textp"> <i>促销价：</i> <span>￥'+n.goods_price+'</span> </p>\n                            <p class="content_text2p">\n                                <i>评价：524</i> <span>累计销量：'+n.goods_sales+'</span>\n                            </p>\n                        </div>\n                        \x3c!-- 店铺优惠价 --\x3e\n                        <p class="content_text3">\n                            <i>店铺优惠:</i>\n                            <span>\n                                <img src="../img/youhui1_03.jpg" alt="">\n                            </span>\n                            <span>\n                                <img src="../img/youhui2_03.jpg" alt="">\n                            </span>\n\n                        </p>\n                    </div>\n                    \x3c!-- 产品尺寸 --\x3e\n                    <div class="content_prodect_detail">\n                        <p>\n                            <i>客服：</i>\n                            <button><img src="../img/chat_03.jpg" alt=""> 联系客服</button>\n                        </p>\n                        <p>\n                            <i>颜色：</i>\n                            <span class="proColor selectColor">'+n.goods_color+'</span> <span class="proColor">'+n.goods_color1+'</span><span class="proColor">'+n.goods_color2+'</span>\n                        </p>\n                        <p>\n                            <i>尺寸：</i>\n                            <span class="proSize selectSize">'+n.goods_size+'</span> <span class="proSize">'+n.goods_size1+'</span><span class="proSize">'+n.goods_size2+'</span> <span class="proSize">'+n.goods_size3+'</span>\n                        </p>\n                        <div>\n                            <i>数量：</i>\n                            <span class="minus">-</span>\n                            <input type="text" value="1" class="num">\n                            <span class="add">+</span>\n                            <i>\n                                库存：1176件\n                            </i>\n                        </div>\n                        <div class="buy">\n                            <button class="buyNow">立即购买</button>\n                            <button class="addCar">加入购物车</button>\n                        </div>\n                        <div class="operation">\n                            <span><img src="../img/star_03.jpg" alt="">3779</span>\n                            <span>\n                                <i>+</i> 分享\n                            </span>\n                            <a href="">\n                                    举报\n                            </a>\n                        </div>\n                        <div class="server">\n                            <i>服务说明：</i>\n                            <span><img src="../img/yes_03.jpg" alt="">72小时发货</span>\n                            <span><img src="../img/yes_03.jpg" alt="">7天无理由退货</span>\n                            <span><img src="../img/yes_03.jpg" alt="">延误必赔</span>\n                            <span><img src="../img/yes_03.jpg" alt="">退货补运费</span>\n                            <span><img src="../img/yes_03.jpg" alt="">全国包邮</span>\n                        </div>\n                        <div class="pay">\n                            <i>支付方式：</i>\n                            <span><img src="../img/zhifubao_03.jpg" alt=""></span>\n                            <span><img src="../img/weixin_03.jpg" alt=""></span>\n                        </div>\n                    </div>\n                </div>\n    ',a+=""+n.introduce,$(".content_text").html(s),$(".content_Text").html(a)}function Simg(){$(".content_text_picMore").click(function(){var n=window.event;if("selectImg"==n.target.className){var s=n.target.src;$(".bigImg").attr("src",s)}}),$(".content_prodect_detail").click(function(){var n=window.event;n.target.classList.contains("proColor")&&(console.log(1),$(".proColor").removeClass("selectColor"),$(n.target).addClass("selectColor")),n.target.classList.contains("proSize")&&(console.log(1),$(".proSize").removeClass("selectSize"),$(n.target).addClass("selectSize"))})}function buy(){$(".buyNow").click(function(){location.href="../html/car.html"})}function innerCar(){$(".minus").click(function(){var n=$(".num").val();1==n?n=1:(n--,$(".num").val(n))}),$(".add").click(function(){var n=$(".num").val();n++,$(".num").val(n)}),$(".addCar").click(function(){var n=$(".num").val(),s=$(".selectColor").text(),a=$(".selectSize").text();if(!login)return location.href="../html/login.html",void localStorage.setItem("url","./detail.html");$.ajax({url:"../api/addCarData.php",method:"get",data:{username:login,goods_id:id,num:n,goods_color:s,goods_size:a},dataType:"json",async:!0,success:function(n){n.code&&alert("加入购物车成功")}})})}$.ajax({url:"../api/getDetail.php",method:"get",data:{id:id},dataType:"json",async:!0,success:function(n){1==n.code&&(console.log(n.detail),readData(n.detail),innerCar(),buy(),Simg())}});