"use strict";$(".header h1").click(function(){location.href="./index.html"}),$(".login_top #p1 span").click(function(){$(".login_ma").css("display","none"),$(".login_screen").css("display","block"),$(".register_screen").css("display","none"),$(".login_top #p1 span").css("border-bottom","3px solid #fe4360"),$(".login_top #p1 i").css("border-bottom","0px")}),$(".login_top #p1 i").click(function(){$(".login_ma").css("display","block"),$(".login_screen").css("display","none"),$(".register_screen").css("display","none"),$(".login_top #p1 i").css("border-bottom","3px solid #fe4360"),$(".login_top #p1 span").css("border-bottom","0px")}),$(".login_screen .p5 i").click(function(){$(".login_ma").css("display","none"),$(".login_screen").css("display","none"),$(".register_screen").css("display","block")}),jQuery.validator.addMethod("testTel",function(e){return!!/^1[3,5,6,7,8]\d{9}$/.test(e)},"验证失败的提示信息"),jQuery.validator.addMethod("testPass",function(e){return!!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/.test(e)},"验证失败的提示信息"),$(".login_screen").validate({rules:{username:{required:!0,testTel:!0},password:{required:!0,testPass:!0}},messages:{username:{required:"账号必填项",testTel:"账号格式不正确"},password:{required:"密码必填项",testPass:"密码格式不正确"}},submitHandler:function(){$.ajax({url:"../api/login.php",method:"post",data:{username:$("#username").val(),password:$("#password").val()},dataType:"json",async:!0,success:function(e){if(1==e.code){$.cookie("login",$("#username").val());var s=localStorage.getItem("url");console.log(s),s?(location.href=s,localStorage.removeItem("url")):location.href="./index.html"}}})}}),$(".register_screen").validate({rules:{username:{required:!0,testTel:!0},password:{required:!0,testPass:!0}},messages:{username:{required:"账号必填项",testTel:"账号格式不正确"},password:{required:"密码必填项",testPass:"密码格式不正确"}},submitHandler:function(){console.log(1),$.ajax({url:"../api/register.php",method:"post",data:{username:$("#user").val(),password:$("#pass").val()},dataType:"json",async:!0,success:function(e){1==e.code&&(alert("注册成功"),location.href="./login.html"),0==e.code&&($("#user").val(""),$("#pass").val(""),alert("用户名已存在"))}})}});